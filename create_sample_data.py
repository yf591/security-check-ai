"""
サンプルデータ生成スクリプト
テスト用のセキュリティQ&Aサンプルを作成
"""

import pandas as pd
from pathlib import Path

# サンプルQ&Aデータ
sample_qa = [
    {
        "質問": "データの暗号化はどのように行われますか？",
        "回答": "当社では、保存データにはAES-256暗号化を、通信データにはTLS 1.3を使用しています。すべての機密データは暗号化され、暗号鍵は専用のキー管理システムで管理されています。",
    },
    {
        "質問": "アクセス制御の仕組みについて教えてください",
        "回答": "ロールベースアクセス制御（RBAC）を採用しており、ユーザーの役割に応じて適切な権限が付与されます。また、多要素認証（MFA）を導入し、不正アクセスを防止しています。",
    },
    {
        "質問": "バックアップの頻度と保存期間は？",
        "回答": "毎日自動バックアップを実施し、過去30日分のバックアップを保持しています。重要なデータについては、週次で長期保存用のアーカイブも作成しています。",
    },
    {
        "質問": "セキュリティ監査はどのように行われていますか？",
        "回答": "年1回の外部セキュリティ監査を実施しており、ISO 27001認証を取得しています。また、四半期ごとに内部セキュリティレビューを実施し、脆弱性スキャンを定期的に実行しています。",
    },
    {
        "質問": "インシデント対応体制について",
        "回答": "24時間365日のセキュリティ監視体制を構築しており、インシデント発生時には専門チームが即座に対応します。インシデント対応計画（IRP）を整備し、定期的な訓練も実施しています。",
    },
    {
        "質問": "従業員のセキュリティ教育はどうなっていますか？",
        "回答": "全従業員に対して年2回のセキュリティ研修を実施しています。また、新入社員には必須のセキュリティトレーニングを提供し、定期的にフィッシングメール訓練も実施しています。",
    },
    {
        "質問": "パスワードポリシーについて",
        "回答": "最低12文字以上、英大文字・小文字・数字・記号の組み合わせを必須としています。90日ごとのパスワード変更を推奨し、過去5世代のパスワードは再利用できません。",
    },
    {
        "質問": "ネットワークセキュリティ対策は？",
        "回答": "ファイアウォール、IDS/IPS、WAFを導入し、多層防御を実現しています。また、ネットワークセグメンテーションにより、重要なシステムを分離しています。",
    },
    {
        "質問": "データ削除の方法について",
        "回答": "データ削除時には、NIST SP 800-88に準拠した方法で完全消去を行います。物理媒体の廃棄時には、専門業者による物理的破壊を実施し、廃棄証明書を取得しています。",
    },
    {
        "質問": "クラウドセキュリティ対策について",
        "回答": "クラウドサービス利用時は、信頼できるプロバイダーを選定し、データの暗号化、アクセス制御、監査ログの取得を徹底しています。また、クラウドセキュリティポスチャ管理（CSPM）ツールを使用しています。",
    },
    {
        "質問": "脆弱性管理のプロセスは？",
        "回答": "月次で脆弱性スキャンを実施し、検出された脆弱性はリスクレベルに応じて優先順位を付けて対応します。重大な脆弱性は48時間以内にパッチ適用を行います。",
    },
    {
        "質問": "サードパーティのセキュリティ評価について",
        "回答": "ベンダー選定時には必ずセキュリティ評価を実施し、ISO 27001やSOC 2などの認証取得状況を確認します。また、定期的なセキュリティレビューを契約に含めています。",
    },
    {
        "質問": "モバイルデバイスのセキュリティ対策は？",
        "回答": "MDM（モバイルデバイス管理）ソリューションを導入し、デバイスの暗号化、リモートワイプ、アプリケーション制御を実施しています。BYOD利用時は、コンテナ化により業務データを分離しています。",
    },
    {
        "質問": "ログ管理と監視について",
        "回答": "すべてのシステムログを集中管理し、最低1年間保存しています。SIEM（セキュリティ情報イベント管理）システムでリアルタイム監視を行い、異常を検知した場合は即座にアラートを発行します。",
    },
    {
        "質問": "災害復旧（DR）対策について",
        "回答": "地理的に離れた場所にDRサイトを構築し、RPO（目標復旧時点）4時間、RTO（目標復旧時間）24時間以内での復旧が可能です。年2回のDR訓練を実施しています。",
    },
]

# data/rawディレクトリの作成
data_dir = Path("./data/raw")
data_dir.mkdir(parents=True, exist_ok=True)

# CSVファイルとして保存
df = pd.DataFrame(sample_qa)
csv_path = data_dir / "sample_security_qa.csv"
df.to_csv(csv_path, index=False, encoding="utf-8-sig")

print(f"✅ サンプルデータを作成しました: {csv_path}")
print(f"📊 Q&Aペア数: {len(sample_qa)}件")
print("\nStreamlitアプリを起動して、'data/rawから再構築'ボタンをクリックしてください。")
